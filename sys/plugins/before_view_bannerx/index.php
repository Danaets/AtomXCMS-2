<?php//include_once dirname(dirname(dirname(__FILE__))) . '/inc/home.php';include_once dirname(dirname(dirname(__FILE__))) . '/boot.php';class Bannerx {	private $pldir;	private $plcdir;	public function __construct($params = array()) {		$this->pldir = dirname(__FILE__);		$this->plcdir = trim(strrchr($this->pldir, DS), DS);	}			public function common($params = array()) {		$out = $this->showBanner();					if (empty($out)) $out = 'Баннера нет';						$out = str_replace('{bannerx}', $out, $params);		return $out;	}			public function showBanner() {		$history_file = $this->pldir . '/db.dat';		if (!file_exists($history_file)) return false;						$out = '';		$data = unserialize(file_get_contents($history_file));						$out .= '<div class="slide">                	<div class="img_holder">';		$out_points = '<div id="flip">';			$class = 'active';							if (!empty($data) && is_array($data)) {			$n = 0;			foreach ($data as $k => $banner) {							$out .= '<div class="banner">                            <div class="cloud">                                <h2>'.h($banner['title']).'</h2>                                <div class="descr">                                    '.h(@$banner['description']).'<br />                                    <a style="float:right;" href="'.h($banner['url']).'">Подробнее »</a>                                </div>                                <div class="clear"></div>                            </div>                        </div>';										//$class = ($k === 0) ? 'active' : '';						$out_points .= '<div class="flip_click" val="'.$n.'">                        <a class="'.$class.'" val="'.$n.'"></a>                     </div>';				$class = '';				$n++;			}		}		$out .= '</div>					</div>';		$out_points .= '</div>';				$out .= $out_points;				return $out;	}	}